<?xml version="1.0" encoding="UTF-8"?>
<svg width="700" height="250" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="350" y="25" font-family="SF Pro Display, system-ui, sans-serif" font-size="16" font-weight="600" text-anchor="middle">Swift Concurrency Model</text>
  
  <!-- Main Thread / UI -->
  <g id="main-thread">
    <rect x="20" y="50" width="150" height="80" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="5"/>
    <text x="95" y="75" font-family="SF Pro Display, system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#2e7d32">@MainActor</text>
    <text x="95" y="95" font-family="SF Pro Display, system-ui, sans-serif" font-size="11" text-anchor="middle">Conversation</text>
    <text x="95" y="110" font-family="SF Pro Display, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#666">(@Observable)</text>
    <circle cx="95" cy="120" r="3" fill="#4caf50"/>
    <text x="110" y="124" font-family="SF Pro Display, system-ui, sans-serif" font-size="9" fill="#666">UI Thread</text>
  </g>
  
  <!-- Actors -->
  <g id="actors">
    <!-- MessageQueue Actor -->
    <rect x="260" y="50" width="150" height="80" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5"/>
    <text x="335" y="75" font-family="SF Pro Display, system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#1565c0">actor</text>
    <text x="335" y="95" font-family="SF Pro Display, system-ui, sans-serif" font-size="11" text-anchor="middle">MessageQueue</text>
    <text x="335" y="110" font-family="SF Pro Display, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#666">(Thread-safe)</text>
    <circle cx="335" cy="120" r="3" fill="#2196f3"/>
    <text x="350" y="124" font-family="SF Pro Display, system-ui, sans-serif" font-size="9" fill="#666">Actor Context</text>
    
    <!-- RealtimeClient Actor -->
    <rect x="260" y="150" width="150" height="80" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5"/>
    <text x="335" y="175" font-family="SF Pro Display, system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#1565c0">actor</text>
    <text x="335" y="195" font-family="SF Pro Display, system-ui, sans-serif" font-size="11" text-anchor="middle">RealtimeClient</text>
    <text x="335" y="210" font-family="SF Pro Display, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#666">(Thread-safe)</text>
    <circle cx="335" cy="220" r="3" fill="#2196f3"/>
    <text x="350" y="224" font-family="SF Pro Display, system-ui, sans-serif" font-size="9" fill="#666">Actor Context</text>
  </g>
  
  <!-- Async Streams -->
  <g id="streams">
    <rect x="500" y="50" width="180" height="80" fill="#fce4ec" stroke="#e91e63" stroke-width="2" rx="5"/>
    <text x="590" y="75" font-family="SF Pro Display, system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#880e4f">AsyncStream</text>
    <text x="590" y="95" font-family="SF Pro Display, system-ui, sans-serif" font-size="10" text-anchor="middle">messages: AsyncStream&lt;Message&gt;</text>
    <text x="590" y="110" font-family="SF Pro Display, system-ui, sans-serif" font-size="10" text-anchor="middle">events: AsyncStream&lt;Event&gt;</text>
  </g>
  
  <!-- Connection Arrows with Labels -->
  <!-- MainActor to MessageQueue -->
  <line x1="175" y1="90" x2="255" y2="90" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="215" y="85" font-family="SF Pro Display, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">await</text>
  
  <!-- MessageQueue to Streams -->
  <line x1="415" y1="90" x2="495" y2="90" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="455" y="85" font-family="SF Pro Display, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">publish</text>
  
  <!-- RealtimeClient to MessageQueue -->
  <line x1="335" y1="150" x2="335" y2="135" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="355" y="143" font-family="SF Pro Display, system-ui, sans-serif" font-size="9" fill="#666">await</text>
  
  <!-- Key Features Box -->
  <g id="features">
    <rect x="20" y="150" width="200" height="80" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="1" rx="3"/>
    <text x="120" y="170" font-family="SF Pro Display, system-ui, sans-serif" font-size="11" font-weight="500" text-anchor="middle">Concurrency Features</text>
    <text x="30" y="190" font-family="SF Pro Display, system-ui, sans-serif" font-size="10">• async/await for all operations</text>
    <text x="30" y="205" font-family="SF Pro Display, system-ui, sans-serif" font-size="10">• Actors for isolation</text>
    <text x="30" y="220" font-family="SF Pro Display, system-ui, sans-serif" font-size="10">• Sendable for safety</text>
  </g>
  
  <!-- Bottom Note -->
  <text x="480" y="160" font-family="SF Pro Display, system-ui, sans-serif" font-size="11" font-weight="500" fill="#666">No GCD • No Combine • Pure Swift 6</text>
</svg>